<script setup>
import navbar from '@/pages/components/navbar.vue'
import { useNotify, useToast, useMessage } from 'wot-design-uni' // uiç»„ä»¶åº“
import { useUserStore } from '@/store'
import QreviewImage from '../../pages/components/q-previewImage.vue'
const userStore = useUserStore()
const { userInfo } = storeToRefs(userStore)
console.log("ğŸš€ ~ userInfo.value:", userInfo.value)

const territoryList = ref([
  {
    name: 'æ¹–å·',
    id: 1,
  },
  {
    name: 'ä¸Šæµ·',
    id: 2,
  },
  {
    name: 'æ­å·',
    id: 3,
  },
]);

const territoryClick = (idx) => {
  territoryList.value.splice(idx, 1)
}

const projectList = ref([
  {
    name: 'å®šä½',
    id: 1,
  },
  {
    name: 'æµ‹è¯•',
    id: 2,
  },
  {
    name: 'è§†é¢‘',
    id: 3,
  },
])

const projectClick = (idx) => {
  projectList.value.splice(idx, 1)
}
const previewImage = ref(null);

const lookover = (idx) => {
  preview('https://web-assets.dcloud.net.cn/unidoc/zh/multiport-20210812.png')
}
const imgs = ['https://web-assets.dcloud.net.cn/unidoc/zh/multiport-20210812.png', 'https://web-assets.dcloud.net.cn/unidoc/zh/uni-function-diagram.png'] //è®¾ç½®å›¾ç‰‡æ•°ç»„
const preview = (url) => {
  setTimeout(() => {
    previewImage.value.open(url); // ä¼ å…¥å½“å‰é€‰ä¸­çš„å›¾ç‰‡åœ°å€(å°ç¨‹åºå¿…é¡»æ·»åŠ $nextTickï¼Œè§£å†³ç»„ä»¶é¦–æ¬¡åŠ è½½æ— å›¾)
  }, 100)
};
const onLongpress = e => {
  console.log('å½“å‰é•¿æŒ‰çš„å›¾ç‰‡æ˜¯' + e);
  uni.showActionSheet({
    itemList: ['æ“ä½œ1', 'æ“ä½œ2', 'ä¿å­˜åˆ°æ‰‹æœº'],
    success: function (res) {
      console.log('é€‰ä¸­äº†ç¬¬' + (res.tapIndex + 1) + 'ä¸ªæŒ‰é’®');
    },
    fail: function (res) {
      console.log(res.errMsg);
    }
  });
}

/* openå’Œcloseæ–¹æ³•ä¸€èˆ¬ç”¨ä¸åˆ°ï¼Œä½†æ˜¯åœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¼šç”¨åˆ°ï¼Œ
* æ¯”å¦‚é¢„è§ˆå›¾ç‰‡æ—¶ä½ éœ€è¦è¦†ç›– NavigationBarå’Œ TabBarï¼Œ
* æˆ–è€…åœ¨appä¸­éœ€è¦é¢„è§ˆå›¾ç‰‡æ—¶è¦†ç›–ä½åŸç”Ÿç»„ä»¶ï¼Œæ¯”å¦‚videoæˆ–è€…mapç­‰ï¼Œ
* ä½ å¯ä»¥æ ¹æ®openå’Œcloseå»åšä¸€äº›æ“ä½œï¼Œä¾‹å¦‚éšè—å¯¼èˆªæ æˆ–è€…éšè—ä¸€äº›åŸç”Ÿç»„ä»¶ç­‰
*/
const open = () => { //ç›‘å¬ç»„ä»¶æ˜¾ç¤º ï¼ˆéšè—TabBarå’ŒNavigationBarï¼Œéšè—videoåŸç”Ÿç»„ä»¶ï¼‰ //æ‰“å¼€æ—¶è§¦å‘
  
  // uni.hideTabBar()
  // uni.setNavigationBarColor({
  //  frontColor: '#000000', // è®¾ç½®å‰æ™¯è‰²ä¸ºé»‘è‰²
  //  backgroundColor: '#000000', // è®¾ç½®èƒŒæ™¯è‰²ä¸ºé»‘è‰²
  // })
  // data.videoShow = false 
  console.log("ğŸš€ ~ open ~ open:", )
}

const close = () => { //ç›‘å¬ç»„ä»¶éšè— ï¼ˆæ˜¾ç¤ºTabBarå’ŒNavigationBarï¼Œæ˜¾ç¤ºvideoåŸç”Ÿç»„ä»¶ï¼‰// å…³é—­æ—¶è§¦å‘
  // uni.showTabBar()
  // uni.setNavigationBarColor({
  //  frontColor: '#ffffff', // è®¾ç½®å‰æ™¯è‰²ä¸ºç™½è‰²
  //  backgroundColor: '#000000', // è®¾ç½®èƒŒæ™¯è‰²ä¸ºé»‘è‰²
  // })
  // data.videoShow = true
}

</script>

<template>
  <wd-toast></wd-toast>
  <view class="info_box">
    <navbar :title="'ä¸ªäººæ¡£æ¡ˆ'" />
    <view class="info_flow">

      <view class="title_box">
        <view class="icon_box"></view>
        <view class="title_text">åŸºæœ¬ä¿¡æ¯</view>
      </view>

      <view class="item_box">
        <text class="label">æ‰€å±ä¼ä¸š</text>
        <view class="right_text">
          <text class="text">æµ™æ±Ÿä¸­å¯¼</text>
        </view>
      </view>

      <view class="item_box">
        <text class="label">å§“å</text>
        <view class="right_text">
          <text class="text">å¼ ä¸‰</text>
        </view>
      </view>


      <view class="item_box">
        <text class="label">æ€§åˆ«</text>
        <view class="right_text">
          <text class="text">ç”·</text>
        </view>
      </view>


      <view class="item_box">
        <text class="label">è”ç³»ç”µè¯</text>
        <view class="right_text">
          <text class="text">19210964479</text>
        </view>
      </view>

      <view class="item_box">
        <text class="label">èº«ä»½è¯å·</text>
        <view class="right_text">
          <text class="text">330522155897445</text>
        </view>
      </view>

      <view class="item_box">
        <text class="label">è´Ÿè´£åŒºåŸŸ</text>
        <view class="right_text">
          <view class="border_box" v-for="(item, idx) in territoryList" :key="idx">
            <text class="border_text">{{ item.name }}</text>
            <image class="cancel" @tap="territoryClick(idx)" src="../../static/images/my/cancel.png"
              mode="scaleToFill" />
          </view>
          <view v-if="territoryList && territoryList.length == 0" class="no_data">æš‚æ— è´Ÿè´£åŒºåŸŸ</view>
        </view>
      </view>

      <view class="item_box">
        <text class="label">å·¥ç¨‹ç±»å‹</text>
        <view class="right_text">
          <view class="border_box" v-for="(item, idx) in projectList" :key="idx">
            <text class="border_text">{{ item.name }}</text>
            <image class="cancel" @tap="projectClick(idx)" src="../../static/images/my/cancel.png" mode="scaleToFill" />
          </view>
          <view v-if="territoryList && projectList.length == 0" class="no_data">æš‚æ— å·¥ç¨‹ç±»å‹</view>
        </view>
      </view>

      <view class="title_box">
        <view class="icon_box"></view>
        <view class="title_text">ä»ä¸šä¿¡æ¯</view>
      </view>

      <view class="item_box">
        <text class="label">èµ„æ ¼è¯å‘è¯æ—¥æœŸ</text>
        <view class="right_text">
          <text class="text">2020-05-15</text>
        </view>
      </view>


      <view class="item_box">
        <text class="label">è¯ä¹¦ç¼–å·</text>
        <view class="right_text">
          <text class="text">330522155897445</text>
        </view>
      </view>


      <view class="item_box">
        <text class="label">æŠ€èƒ½ç­‰çº§</text>
        <view class="right_text">
          <text class="text">ä¸‰çº§/é«˜çº§æŠ€èƒ½</text>
        </view>
      </view>

      <view class="item_box">
        <text class="label">å·¥ç§åç§°</text>
        <view class="right_text">
          <text class="text">ç”µå·¥</text>
        </view>
      </view>

      <view class="item_box">
        <text class="label">èµ„æ ¼è¯é™„ä»¶</text>
        <view class="right_text">
          <text class="lookover" @tap="lookover(1)">æŸ¥çœ‹</text>
        </view>
      </view>

      <view class="item_box">
        <text class="label">é«˜å‹ç”µå·¥è¯é™„ä»¶</text>
        <view class="right_text">
          <text class="lookover" @tap="lookover(2)">æŸ¥çœ‹</text>
        </view>
      </view>

      <view class="item_box">
        <text class="label">ä½å‹ç”µå·¥è¯é™„ä»¶</text>
        <view class="right_text">
          <text class="lookover" @tap="lookover(3)">æŸ¥çœ‹</text>
        </view>
      </view>

      <view class="item_box">
        <text class="label">é«˜å¤„ä½œä¸šè¯é™„ä»¶</text>
        <view class="right_text">
          <text class="lookover" @tap="lookover(4)">æŸ¥çœ‹</text>
        </view>
      </view>

    </view>
    <QreviewImage ref="previewImage" :urls="imgs" @onLongpress="onLongpress" @open="open" @close="close"></QreviewImage>
  </view>
</template>
<style lang="scss" scoped>
.info_box {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100vh;
  overflow: hidden;
  background-color: #f7f7fc;

  .info_flow {
    flex: 1;
    width: 100;
    padding-bottom: 100rpx;
    overflow-y: scroll;
    padding: 0 30rpx;
    box-sizing: border-box;

    .item_box {
      width: 92%;
      height: 80rpx;
      display: flex;
      align-items: center;
      margin: 0 auto;
      border-bottom: 1rpx solid #B7BEC8;

      .label {
        font-weight: 400;
        font-size: 28rpx;
        color: #484848;
      }

      .right_text {
        flex: 1;
        display: flex;
        justify-content: flex-end;
        align-items: center;

        .text {
          font-size: 28rpx;
          color: #000000;
        }

        .no_data {
          font-size: 28rpx;
          color: #B7BEC8;
        }

        .border_box {
          width: 80rpx;
          height: 42rpx;
          border-radius: 7rpx;
          border: 2rpx solid #1082FF;
          font-size: 26rpx;
          color: #1082FF;
          line-height: 42rpx;
          margin-left: 12rpx;
          text-align: center;
          position: relative;

          .cancel {
            width: 24rpx;
            height: 24rpx;
            position: absolute;
            top: -12rpx;
            right: -12rpx;
          }
        }

        .lookover {
          font-size: 28rpx;
          color: #1082FF;
          line-height: 16rpx;
          text-decoration: underline;
        }

      }
    }

    .title_box {
      width: 100%;
      height: 60rpx;
      display: flex;
      align-items: center;
      margin-top: 40rpx;

      .icon_box {
        display: inline-block;
        width: 11rpx;
        height: 27rpx;
        background-color: #8EAFFF;
        margin-right: 20rpx;
      }

      .title_text {
        font-weight: bold;
        font-size: 28rpx;
        color: #000000;
      }
    }
  }
}
</style>